{"version":3,"sources":["../../src/controller/topic.js"],"names":["config","db","api","get","req","res","find","populate","path","model","exec","err","topic","send","console","log","JSON","stringify","json"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;;;kBAEe,gBAAkB;AAAA,QAAhBA,MAAgB,QAAhBA,MAAgB;AAAA,QAARC,EAAQ,QAARA,EAAQ;;AAC7B,QAAIC,MAAM,sBAAV;;AAEA;AACA;AACA;;AAEA;;AAEA;AACAA,QAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAMC,IAAN,CAAW,EAAX;AACI;AADJ,SAEKC,QAFL,CAEc,EAACC,MAAK,WAAN,EAAmBC,OAAM,UAAzB,EAAqCF,UAAU,EAACC,MAAM,aAAP,EAAsBC,OAAO,OAA7B,EAA/C,EAFd,EAGKC,IAHL,CAII,UAASC,GAAT,EAAcC,KAAd,EAAqB;AACjB,gBAAID,GAAJ,EAAS;AACLN,oBAAIQ,IAAJ,CAASF,GAAT;AACH;AACDG,oBAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAeL,KAAf,CAAZ;AACAP,gBAAIa,IAAJ,CAASN,KAAT;AACH,SAVL;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAvCD;AAwCA,WAAOV,GAAP;AACH,C","file":"topic.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express';\nimport Topic from '../model/topic';\n\nexport default ({config, db}) => {\n    let api = Router();\n\n    // // v1/topics/\n    // //GET a topic by title\n    // api.get('/get/:title', (req, res) => {\n\n    // });\n\n    // //GET all topics\n    api.get('/', (req, res) => {\n\n        // Topic.findOne({title:'Numbers'})\n        //     // .populate('subTopics')\n        //     .exec({\n        //         function (err, topic) {\n        //             if (err) {\n        //                 res.send(err);\n        //             }\n        //             console.log(JSON.stringify(topic));\n        //             res.json(topic)\n        //         }\n        //     });\n\n        //TODO: Reinsert data via Mongoose.\n        //Schema can't match schemaless docs.\n\n        Topic.find({})\n            // .populate('subTopics')\n            .populate({path:'subTopics', model:'SubTopic', populate: {path: 'parentTopic', model: 'Topic'}})\n            .exec(\n            function(err, topic) {\n                if (err) {\n                    res.send(err)\n                }\n                console.log(JSON.stringify(topic));\n                res.json(topic);\n            }\n        );\n\n        // .populate({path: 'subTopicResults', model: 'SubTopicResult', populate: {path: 'subtopic', model: 'SubTopic', populate: {path: 'parentTopic', model: 'Topic'}}})\n\n        // Topic.findOne({}, (err, topics) => {\n        //     if (err) {\n        //         res.send(err);\n        //     }\n        //     console.log(JSON.stringify(topics));\n        //     res.json(topics);\n        // });\n    });\n    return api;\n};"]}