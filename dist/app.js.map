{"version":3,"sources":["../src/app.js"],"names":["LocalStrategy","require","Strategy","app","use","json","limit","bodyParser","initialize","Account","usernameField","passwordField","authenticate","serializeUser","deserializeUser","get","req","res","status","send","listener","listen","port","console","log","address"],"mappings":";;;;;;AAWA;;;;AACA;;;;AACA;;;;AACA;;;;AAKA;;;;AACA;;;;;;AApBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AAMA,IAAMA,gBAAgBC,QAAQ,gBAAR,EAA0BC,QAAhD;AACA;;AAKA,IAAIC,MAAM,wBAAV;AACA;;AAEA;AACAA,IAAIC,GAAJ,CAAQ,qBAAWC,IAAX,CAAgB;AACpBC,WAAO,iBAAOC;AADM,CAAhB,CAAR;;AAIA;AACA;AACAJ,IAAIC,GAAJ,CAAQ,mBAASI,UAAT,EAAR;AACA,IAAIC,UAAUR,QAAQ,iBAAR,CAAd;AACA,mBAASG,GAAT,CAAa,IAAIJ,aAAJ,CAAkB;AACvBU,mBAAe,OADQ;AAEvBC,mBAAe;AAFQ,CAAlB,EAITF,QAAQG,YAAR,EAJS,CAAb;AAMA;AACA,mBAASC,aAAT,CAAuBJ,QAAQI,aAAR,EAAvB;AACA,mBAASC,eAAT,CAAyBL,QAAQK,eAAR,EAAzB;;AAEA;AACAX,IAAIC,GAAJ,CAAQ,KAAR;;AAEA;AACAD,IAAIY,GAAJ,CAAQ,OAAR,EAAiB,UAASC,GAAT,EAAcC,GAAd,EAAmB;;AAEhCA,QAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gBAArB;AAEF,CAJF;;AAOA,IAAIC,WAAWjB,IAAIkB,MAAJ,CAAW,iBAAOC,IAAlB,CAAf;AACAC,QAAQC,GAAR,sBAA+BJ,SAASK,OAAT,GAAmBH,IAAlD;;kBAEenB,G","file":"app.js","sourcesContent":["// import express from 'express';\n// var app = express();\n// var greeter = require('./greeter.js');\n\n// app.get('/', function (req, res) {\n//   res.send(greeter());\n// });\n\n// app.listen(process.env.PORT || 3000);\n\n//import http from 'http';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport mongoose from 'mongoose';\nimport passport from 'passport';\n\nconst LocalStrategy = require('passport-local').Strategy;\n// import { Strategy as LocalStrategy } from 'passport-local';\n\nimport config from './config';\nimport routes from './routes';\n\nlet app = express();\n//app.server = http.createServer(app);\n\n//middleware - bodyparser for handling JSON. Limit set to avoid large amounts of data\napp.use(bodyParser.json({\n    limit: config.bodyParser\n}));\n\n//passport\n//auth layer\napp.use(passport.initialize());\nlet Account = require('./model/account');\npassport.use(new LocalStrategy({\n        usernameField: 'email',\n        passwordField: 'password'\n    },\n    Account.authenticate()\n));\n//seralisation and deserialisation required\npassport.serializeUser(Account.serializeUser());\npassport.deserializeUser(Account.deserializeUser());\n\n//api routes\napp.use('/v1', routes);\n\n//Testing web routes\napp.get('/test', function(req, res) {\n\n    res.status(200).send(\"Hello worldyee\");\n \n });\n\n\nvar listener = app.listen(config.port);\nconsole.log(`Started on port ${listener.address().port}`);\n\nexport default app;"]}